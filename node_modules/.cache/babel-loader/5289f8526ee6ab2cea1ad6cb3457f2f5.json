{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport EventEmitter from '@algolia/events';\nimport index, { isIndexWidget } from \"../widgets/index/index.js\";\nimport version from \"./version.js\";\nimport createHelpers from \"./createHelpers.js\";\nimport { createDocumentationMessageGenerator, createDocumentationLink, defer, noop, warning, checkIndexUiState } from \"./utils/index.js\";\nimport { createRouterMiddleware } from \"../middlewares/createRouterMiddleware.js\";\nimport { createMetadataMiddleware, isMetadataEnabled } from \"../middlewares/createMetadataMiddleware.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'instantsearch'\n});\n\nfunction defaultCreateURL() {\n  return '#';\n} // this purposely breaks typescript's type inference to ensure it's not used\n// as it's used for a default parameter for example\n// source: https://github.com/Microsoft/TypeScript/issues/14829#issuecomment-504042546\n\n/**\n * The actual implementation of the InstantSearch. This is\n * created using the `instantsearch` factory function.\n * It emits the 'render' event every time a search is done\n */\n\n\nvar InstantSearch = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(InstantSearch, _EventEmitter);\n\n  var _super = _createSuper(InstantSearch);\n\n  function InstantSearch(options) {\n    var _this;\n\n    _classCallCheck(this, InstantSearch);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"client\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"indexName\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"insightsClient\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onStateChange\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"helper\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mainHelper\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mainIndex\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"started\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"templatesConfig\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"renderState\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"_stalledSearchDelay\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_searchStalledTimer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_isSearchStalled\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_initialUiState\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_initialResults\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_createURL\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_searchFunction\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mainHelperSearch\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"middleware\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"sendEventToInsights\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"scheduleSearch\", defer(function () {\n      if (_this.started) {\n        _this.mainHelper.search();\n      }\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"scheduleRender\", defer(function () {\n      if (!_this.mainHelper.hasPendingRequests()) {\n        clearTimeout(_this._searchStalledTimer);\n        _this._searchStalledTimer = null;\n        _this._isSearchStalled = false;\n      }\n\n      _this.mainIndex.render({\n        instantSearchInstance: _assertThisInitialized(_this)\n      });\n\n      _this.emit('render');\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"onInternalStateChange\", defer(function () {\n      var nextUiState = _this.mainIndex.getWidgetUiState({});\n\n      _this.middleware.forEach(function (_ref) {\n        var instance = _ref.instance;\n        instance.onStateChange({\n          uiState: nextUiState\n        });\n      });\n    }));\n\n    var _options$indexName = options.indexName,\n        indexName = _options$indexName === void 0 ? null : _options$indexName,\n        numberLocale = options.numberLocale,\n        _options$initialUiSta = options.initialUiState,\n        initialUiState = _options$initialUiSta === void 0 ? {} : _options$initialUiSta,\n        _options$routing = options.routing,\n        routing = _options$routing === void 0 ? null : _options$routing,\n        searchFunction = options.searchFunction,\n        _options$stalledSearc = options.stalledSearchDelay,\n        stalledSearchDelay = _options$stalledSearc === void 0 ? 200 : _options$stalledSearc,\n        _options$searchClient = options.searchClient,\n        searchClient = _options$searchClient === void 0 ? null : _options$searchClient,\n        _options$insightsClie = options.insightsClient,\n        insightsClient = _options$insightsClie === void 0 ? null : _options$insightsClie,\n        _options$onStateChang = options.onStateChange,\n        onStateChange = _options$onStateChang === void 0 ? null : _options$onStateChang;\n\n    if (indexName === null) {\n      throw new Error(withUsage('The `indexName` option is required.'));\n    }\n\n    if (searchClient === null) {\n      throw new Error(withUsage('The `searchClient` option is required.'));\n    }\n\n    if (typeof searchClient.search !== 'function') {\n      throw new Error(\"The `searchClient` must implement a `search` method.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/\");\n    }\n\n    if (typeof searchClient.addAlgoliaAgent === 'function') {\n      searchClient.addAlgoliaAgent(\"instantsearch.js (\".concat(version, \")\"));\n    }\n\n    process.env.NODE_ENV === 'development' ? warning(insightsClient === null, \"`insightsClient` property has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\\n\\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\") : void 0;\n\n    if (insightsClient && typeof insightsClient !== 'function') {\n      throw new Error(withUsage('The `insightsClient` option should be a function.'));\n    }\n\n    process.env.NODE_ENV === 'development' ? warning(!options.searchParameters, \"The `searchParameters` option is deprecated and will not be supported in InstantSearch.js 4.x.\\n\\nYou can replace it with the `configure` widget:\\n\\n```\\nsearch.addWidgets([\\n  configure(\".concat(JSON.stringify(options.searchParameters, null, 2), \")\\n]);\\n```\\n\\nSee \").concat(createDocumentationLink({\n      name: 'configure'\n    }))) : void 0;\n    _this.client = searchClient;\n    _this.insightsClient = insightsClient;\n    _this.indexName = indexName;\n    _this.helper = null;\n    _this.mainHelper = null;\n    _this.mainIndex = index({\n      indexName: indexName\n    });\n    _this.onStateChange = onStateChange;\n    _this.started = false;\n    _this.templatesConfig = {\n      helpers: createHelpers({\n        numberLocale: numberLocale\n      }),\n      compileOptions: {}\n    };\n    _this._stalledSearchDelay = stalledSearchDelay;\n    _this._searchStalledTimer = null;\n    _this._isSearchStalled = false;\n    _this._createURL = defaultCreateURL;\n    _this._initialUiState = initialUiState;\n    _this._initialResults = null;\n\n    if (searchFunction) {\n      _this._searchFunction = searchFunction;\n    }\n\n    _this.sendEventToInsights = noop;\n\n    if (routing) {\n      var routerOptions = typeof routing === 'boolean' ? undefined : routing;\n\n      _this.use(createRouterMiddleware(routerOptions));\n    }\n\n    if (isMetadataEnabled()) {\n      _this.use(createMetadataMiddleware());\n    }\n\n    return _this;\n  }\n  /**\n   * Hooks a middleware into the InstantSearch lifecycle.\n   */\n\n\n  _createClass(InstantSearch, [{\n    key: \"use\",\n    value: function use() {\n      var _this2 = this;\n\n      for (var _len = arguments.length, middleware = new Array(_len), _key = 0; _key < _len; _key++) {\n        middleware[_key] = arguments[_key];\n      }\n\n      var newMiddlewareList = middleware.map(function (fn) {\n        var newMiddleware = _objectSpread({\n          subscribe: noop,\n          unsubscribe: noop,\n          onStateChange: noop\n        }, fn({\n          instantSearchInstance: _this2\n        }));\n\n        _this2.middleware.push({\n          creator: fn,\n          instance: newMiddleware\n        });\n\n        return newMiddleware;\n      }); // If the instance has already started, we directly subscribe the\n      // middleware so they're notified of changes.\n\n      if (this.started) {\n        newMiddlewareList.forEach(function (m) {\n          m.subscribe();\n        });\n      }\n\n      return this;\n    }\n    /**\n     * Removes a middleware from the InstantSearch lifecycle.\n     */\n\n  }, {\n    key: \"unuse\",\n    value: function unuse() {\n      for (var _len2 = arguments.length, middlewareToUnuse = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        middlewareToUnuse[_key2] = arguments[_key2];\n      }\n\n      this.middleware.filter(function (m) {\n        return middlewareToUnuse.includes(m.creator);\n      }).forEach(function (m) {\n        return m.instance.unsubscribe();\n      });\n      this.middleware = this.middleware.filter(function (m) {\n        return !middlewareToUnuse.includes(m.creator);\n      });\n      return this;\n    } // @major we shipped with EXPERIMENTAL_use, but have changed that to just `use` now\n\n  }, {\n    key: \"EXPERIMENTAL_use\",\n    value: function EXPERIMENTAL_use() {\n      process.env.NODE_ENV === 'development' ? warning(false, 'The middleware API is now considered stable, so we recommend replacing `EXPERIMENTAL_use` with `use` before upgrading to the next major version.') : void 0;\n      return this.use.apply(this, arguments);\n    }\n    /**\n     * Adds a widget to the search instance.\n     * A widget can be added either before or after InstantSearch has started.\n     * @param widget The widget to add to InstantSearch.\n     *\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`.\n     */\n\n  }, {\n    key: \"addWidget\",\n    value: function addWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'addWidget will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`') : void 0;\n      return this.addWidgets([widget]);\n    }\n    /**\n     * Adds multiple widgets to the search instance.\n     * Widgets can be added either before or after InstantSearch has started.\n     * @param widgets The array of widgets to add to InstantSearch.\n     */\n\n  }, {\n    key: \"addWidgets\",\n    value: function addWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets. Please use `addWidget`.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n\n      this.mainIndex.addWidgets(widgets);\n      return this;\n    }\n    /**\n     * Removes a widget from the search instance.\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`\n     * @param widget The widget instance to remove from InstantSearch.\n     *\n     * The widget must implement a `dispose()` method to clear its state.\n     */\n\n  }, {\n    key: \"removeWidget\",\n    value: function removeWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'removeWidget will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`') : void 0;\n      return this.removeWidgets([widget]);\n    }\n    /**\n     * Removes multiple widgets from the search instance.\n     * @param widgets Array of widgets instances to remove from InstantSearch.\n     *\n     * The widgets must implement a `dispose()` method to clear their states.\n     */\n\n  }, {\n    key: \"removeWidgets\",\n    value: function removeWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets. Please use `removeWidget`.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n\n      this.mainIndex.removeWidgets(widgets);\n      return this;\n    }\n    /**\n     * Ends the initialization of InstantSearch.js and triggers the\n     * first search. This method should be called after all widgets have been added\n     * to the instance of InstantSearch.js. InstantSearch.js also supports adding and removing\n     * widgets after the start as an **EXPERIMENTAL** feature.\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n\n      if (this.started) {\n        throw new Error(withUsage('The `start` method has already been called once.'));\n      } // This Helper is used for the queries, we don't care about its state. The\n      // states are managed at the `index` level. We use this Helper to create\n      // DerivedHelper scoped into the `index` widgets.\n      // In Vue InstantSearch' hydrate, a main helper gets set before start, so\n      // we need to respect this helper as a way to keep all listeners correct.\n\n\n      var mainHelper = this.mainHelper || algoliasearchHelper(this.client, this.indexName);\n\n      mainHelper.search = function () {\n        // This solution allows us to keep the exact same API for the users but\n        // under the hood, we have a different implementation. It should be\n        // completely transparent for the rest of the codebase. Only this module\n        // is impacted.\n        return mainHelper.searchOnlyWithDerivedHelpers();\n      };\n\n      if (this._searchFunction) {\n        // this client isn't used to actually search, but required for the helper\n        // to not throw errors\n        var fakeClient = {\n          search: function search() {\n            return new Promise(noop);\n          }\n        };\n        this._mainHelperSearch = mainHelper.search.bind(mainHelper);\n\n        mainHelper.search = function () {\n          var mainIndexHelper = _this3.mainIndex.getHelper();\n\n          var searchFunctionHelper = algoliasearchHelper(fakeClient, mainIndexHelper.state.index, mainIndexHelper.state);\n          searchFunctionHelper.once('search', function (_ref2) {\n            var state = _ref2.state;\n            mainIndexHelper.overrideStateWithoutTriggeringChangeEvent(state);\n\n            _this3._mainHelperSearch();\n          }); // Forward state changes from `searchFunctionHelper` to `mainIndexHelper`\n\n          searchFunctionHelper.on('change', function (_ref3) {\n            var state = _ref3.state;\n            mainIndexHelper.setState(state);\n          });\n\n          _this3._searchFunction(searchFunctionHelper);\n\n          return mainHelper;\n        };\n      } // Only the \"main\" Helper emits the `error` event vs the one for `search`\n      // and `results` that are also emitted on the derived one.\n\n\n      mainHelper.on('error', function (_ref4) {\n        var error = _ref4.error;\n\n        if (!(error instanceof Error)) {\n          // typescript lies here, error is in some cases { name: string, message: string }\n          var err = error;\n          error = Object.keys(err).reduce(function (acc, key) {\n            acc[key] = err[key];\n            return acc;\n          }, new Error(err.message));\n        } // If an error is emitted, it is re-thrown by events. In previous versions\n        // we emitted {error}, which is thrown as:\n        // \"Uncaught, unspecified \\\"error\\\" event. ([object Object])\"\n        // To avoid breaking changes, we make the error available in both\n        // `error` and `error.error`\n        // @MAJOR emit only error\n\n\n        error.error = error;\n\n        _this3.emit('error', error);\n      });\n      this.mainHelper = mainHelper;\n      this.middleware.forEach(function (_ref5) {\n        var instance = _ref5.instance;\n        instance.subscribe();\n      });\n      this.mainIndex.init({\n        instantSearchInstance: this,\n        parent: null,\n        uiState: this._initialUiState\n      });\n\n      if (this._initialResults) {\n        var originalScheduleSearch = this.scheduleSearch; // We don't schedule a first search when initial results are provided\n        // because we already have the results to render. This skips the initial\n        // network request on the browser on `start`.\n\n        this.scheduleSearch = defer(noop); // We also skip the initial network request when widgets are dynamically\n        // added in the first tick (that's the case in all the framework-based flavors).\n        // When we add a widget to `index`, it calls `scheduleSearch`. We can rely\n        // on our `defer` util to restore the original `scheduleSearch` value once\n        // widgets are added to hook back to the regular lifecycle.\n\n        defer(function () {\n          _this3.scheduleSearch = originalScheduleSearch;\n        })();\n      } // We only schedule a search when widgets have been added before `start()`\n      // because there are listeners that can use these results.\n      // This is especially useful in framework-based flavors that wait for\n      // dynamically-added widgets to trigger a network request. It avoids\n      // having to batch this initial network request with the one coming from\n      // `addWidgets()`.\n      // Later, we could also skip `index()` widgets and widgets that don't read\n      // the results, but this is an optimization that has a very low impact for now.\n      else if (this.mainIndex.getWidgets().length > 0) {\n        this.scheduleSearch();\n      } // Keep the previous reference for legacy purpose, some pattern use\n      // the direct Helper access `search.helper` (e.g multi-index).\n\n\n      this.helper = this.mainIndex.getHelper(); // track we started the search if we add more widgets,\n      // to init them directly after add\n\n      this.started = true;\n    }\n    /**\n     * Removes all widgets without triggering a search afterwards. This is an **EXPERIMENTAL** feature,\n     * if you find an issue with it, please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20dispose).\n     * @return {undefined} This method does not return anything\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.scheduleSearch.cancel();\n      this.scheduleRender.cancel();\n      clearTimeout(this._searchStalledTimer);\n      this.removeWidgets(this.mainIndex.getWidgets());\n      this.mainIndex.dispose(); // You can not start an instance two times, therefore a disposed instance\n      // needs to set started as false otherwise this can not be restarted at a\n      // later point.\n\n      this.started = false; // The helper needs to be reset to perform the next search from a fresh state.\n      // If not reset, it would use the state stored before calling `dispose()`.\n\n      this.removeAllListeners();\n      this.mainHelper.removeAllListeners();\n      this.mainHelper = null;\n      this.helper = null;\n      this.middleware.forEach(function (_ref6) {\n        var instance = _ref6.instance;\n        instance.unsubscribe();\n      });\n    }\n  }, {\n    key: \"scheduleStalledRender\",\n    value: function scheduleStalledRender() {\n      var _this4 = this;\n\n      if (!this._searchStalledTimer) {\n        this._searchStalledTimer = setTimeout(function () {\n          _this4._isSearchStalled = true;\n\n          _this4.scheduleRender();\n        }, this._stalledSearchDelay);\n      }\n    }\n  }, {\n    key: \"setUiState\",\n    value: function setUiState(uiState) {\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `setUiState`.'));\n      } // We refresh the index UI state to update the local UI state that the\n      // main index passes to the function form of `setUiState`.\n\n\n      this.mainIndex.refreshUiState();\n      var nextUiState = typeof uiState === 'function' ? uiState(this.mainIndex.getWidgetUiState({})) : uiState;\n\n      var setIndexHelperState = function setIndexHelperState(indexWidget) {\n        var nextIndexUiState = nextUiState[indexWidget.getIndexId()] || {};\n\n        if (process.env.NODE_ENV === 'development') {\n          checkIndexUiState({\n            index: indexWidget,\n            indexUiState: nextIndexUiState\n          });\n        }\n\n        indexWidget.getHelper().setState(indexWidget.getWidgetSearchParameters(indexWidget.getHelper().state, {\n          uiState: nextIndexUiState\n        }));\n        indexWidget.getWidgets().filter(isIndexWidget).forEach(setIndexHelperState);\n      };\n\n      setIndexHelperState(this.mainIndex);\n      this.scheduleSearch();\n      this.onInternalStateChange();\n    }\n  }, {\n    key: \"getUiState\",\n    value: function getUiState() {\n      if (this.started) {\n        // We refresh the index UI state to make sure changes from `refine` are taken in account\n        this.mainIndex.refreshUiState();\n      }\n\n      return this.mainIndex.getWidgetUiState({});\n    }\n  }, {\n    key: \"createURL\",\n    value: function createURL() {\n      var nextState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.started) {\n        throw new Error(withUsage('The `start` method needs to be called before `createURL`.'));\n      }\n\n      return this._createURL(nextState);\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `refresh`.'));\n      }\n\n      this.mainHelper.clearCache().search();\n    }\n  }]);\n\n  return InstantSearch;\n}(EventEmitter);\n\nexport default InstantSearch;","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","algoliasearchHelper","EventEmitter","index","isIndexWidget","version","createHelpers","createDocumentationMessageGenerator","createDocumentationLink","defer","noop","warning","checkIndexUiState","createRouterMiddleware","createMetadataMiddleware","isMetadataEnabled","withUsage","name","defaultCreateURL","InstantSearch","_EventEmitter","_super","options","_this","started","mainHelper","search","hasPendingRequests","clearTimeout","_searchStalledTimer","_isSearchStalled","mainIndex","render","instantSearchInstance","emit","nextUiState","getWidgetUiState","middleware","_ref","onStateChange","uiState","_options$indexName","indexName","numberLocale","_options$initialUiSta","initialUiState","_options$routing","routing","searchFunction","_options$stalledSearc","stalledSearchDelay","_options$searchClient","searchClient","_options$insightsClie","insightsClient","_options$onStateChang","Error","addAlgoliaAgent","concat","process","env","NODE_ENV","searchParameters","JSON","stringify","client","helper","templatesConfig","helpers","compileOptions","_stalledSearchDelay","_createURL","_initialUiState","_initialResults","_searchFunction","sendEventToInsights","routerOptions","undefined","use","_this2","_len","Array","_key","newMiddlewareList","map","fn","newMiddleware","subscribe","unsubscribe","creator","m","unuse","_len2","middlewareToUnuse","_key2","includes","EXPERIMENTAL_use","addWidget","widget","addWidgets","widgets","isArray","some","init","removeWidget","removeWidgets","dispose","start","_this3","searchOnlyWithDerivedHelpers","fakeClient","Promise","_mainHelperSearch","bind","mainIndexHelper","getHelper","searchFunctionHelper","state","once","_ref2","overrideStateWithoutTriggeringChangeEvent","on","_ref3","setState","_ref4","error","err","reduce","acc","message","_ref5","parent","originalScheduleSearch","scheduleSearch","getWidgets","cancel","scheduleRender","removeAllListeners","_ref6","scheduleStalledRender","_this4","setTimeout","setUiState","refreshUiState","setIndexHelperState","indexWidget","nextIndexUiState","getIndexId","indexUiState","getWidgetSearchParameters","onInternalStateChange","getUiState","createURL","nextState","refresh","clearCache"],"sources":["/Users/christoalex/Algolia/my-app/node_modules/instantsearch.js/es/lib/InstantSearch.js"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport EventEmitter from '@algolia/events';\nimport index, { isIndexWidget } from \"../widgets/index/index.js\";\nimport version from \"./version.js\";\nimport createHelpers from \"./createHelpers.js\";\nimport { createDocumentationMessageGenerator, createDocumentationLink, defer, noop, warning, checkIndexUiState } from \"./utils/index.js\";\nimport { createRouterMiddleware } from \"../middlewares/createRouterMiddleware.js\";\nimport { createMetadataMiddleware, isMetadataEnabled } from \"../middlewares/createMetadataMiddleware.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'instantsearch'\n});\n\nfunction defaultCreateURL() {\n  return '#';\n} // this purposely breaks typescript's type inference to ensure it's not used\n// as it's used for a default parameter for example\n// source: https://github.com/Microsoft/TypeScript/issues/14829#issuecomment-504042546\n\n\n/**\n * The actual implementation of the InstantSearch. This is\n * created using the `instantsearch` factory function.\n * It emits the 'render' event every time a search is done\n */\nvar InstantSearch = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(InstantSearch, _EventEmitter);\n\n  var _super = _createSuper(InstantSearch);\n\n  function InstantSearch(options) {\n    var _this;\n\n    _classCallCheck(this, InstantSearch);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"client\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"indexName\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"insightsClient\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onStateChange\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"helper\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mainHelper\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mainIndex\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"started\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"templatesConfig\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"renderState\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"_stalledSearchDelay\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_searchStalledTimer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_isSearchStalled\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_initialUiState\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_initialResults\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_createURL\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_searchFunction\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_mainHelperSearch\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"middleware\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"sendEventToInsights\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"scheduleSearch\", defer(function () {\n      if (_this.started) {\n        _this.mainHelper.search();\n      }\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"scheduleRender\", defer(function () {\n      if (!_this.mainHelper.hasPendingRequests()) {\n        clearTimeout(_this._searchStalledTimer);\n        _this._searchStalledTimer = null;\n        _this._isSearchStalled = false;\n      }\n\n      _this.mainIndex.render({\n        instantSearchInstance: _assertThisInitialized(_this)\n      });\n\n      _this.emit('render');\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"onInternalStateChange\", defer(function () {\n      var nextUiState = _this.mainIndex.getWidgetUiState({});\n\n      _this.middleware.forEach(function (_ref) {\n        var instance = _ref.instance;\n        instance.onStateChange({\n          uiState: nextUiState\n        });\n      });\n    }));\n\n    var _options$indexName = options.indexName,\n        indexName = _options$indexName === void 0 ? null : _options$indexName,\n        numberLocale = options.numberLocale,\n        _options$initialUiSta = options.initialUiState,\n        initialUiState = _options$initialUiSta === void 0 ? {} : _options$initialUiSta,\n        _options$routing = options.routing,\n        routing = _options$routing === void 0 ? null : _options$routing,\n        searchFunction = options.searchFunction,\n        _options$stalledSearc = options.stalledSearchDelay,\n        stalledSearchDelay = _options$stalledSearc === void 0 ? 200 : _options$stalledSearc,\n        _options$searchClient = options.searchClient,\n        searchClient = _options$searchClient === void 0 ? null : _options$searchClient,\n        _options$insightsClie = options.insightsClient,\n        insightsClient = _options$insightsClie === void 0 ? null : _options$insightsClie,\n        _options$onStateChang = options.onStateChange,\n        onStateChange = _options$onStateChang === void 0 ? null : _options$onStateChang;\n\n    if (indexName === null) {\n      throw new Error(withUsage('The `indexName` option is required.'));\n    }\n\n    if (searchClient === null) {\n      throw new Error(withUsage('The `searchClient` option is required.'));\n    }\n\n    if (typeof searchClient.search !== 'function') {\n      throw new Error(\"The `searchClient` must implement a `search` method.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/\");\n    }\n\n    if (typeof searchClient.addAlgoliaAgent === 'function') {\n      searchClient.addAlgoliaAgent(\"instantsearch.js (\".concat(version, \")\"));\n    }\n\n    process.env.NODE_ENV === 'development' ? warning(insightsClient === null, \"`insightsClient` property has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\\n\\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\") : void 0;\n\n    if (insightsClient && typeof insightsClient !== 'function') {\n      throw new Error(withUsage('The `insightsClient` option should be a function.'));\n    }\n\n    process.env.NODE_ENV === 'development' ? warning(!options.searchParameters, \"The `searchParameters` option is deprecated and will not be supported in InstantSearch.js 4.x.\\n\\nYou can replace it with the `configure` widget:\\n\\n```\\nsearch.addWidgets([\\n  configure(\".concat(JSON.stringify(options.searchParameters, null, 2), \")\\n]);\\n```\\n\\nSee \").concat(createDocumentationLink({\n      name: 'configure'\n    }))) : void 0;\n    _this.client = searchClient;\n    _this.insightsClient = insightsClient;\n    _this.indexName = indexName;\n    _this.helper = null;\n    _this.mainHelper = null;\n    _this.mainIndex = index({\n      indexName: indexName\n    });\n    _this.onStateChange = onStateChange;\n    _this.started = false;\n    _this.templatesConfig = {\n      helpers: createHelpers({\n        numberLocale: numberLocale\n      }),\n      compileOptions: {}\n    };\n    _this._stalledSearchDelay = stalledSearchDelay;\n    _this._searchStalledTimer = null;\n    _this._isSearchStalled = false;\n    _this._createURL = defaultCreateURL;\n    _this._initialUiState = initialUiState;\n    _this._initialResults = null;\n\n    if (searchFunction) {\n      _this._searchFunction = searchFunction;\n    }\n\n    _this.sendEventToInsights = noop;\n\n    if (routing) {\n      var routerOptions = typeof routing === 'boolean' ? undefined : routing;\n\n      _this.use(createRouterMiddleware(routerOptions));\n    }\n\n    if (isMetadataEnabled()) {\n      _this.use(createMetadataMiddleware());\n    }\n\n    return _this;\n  }\n  /**\n   * Hooks a middleware into the InstantSearch lifecycle.\n   */\n\n\n  _createClass(InstantSearch, [{\n    key: \"use\",\n    value: function use() {\n      var _this2 = this;\n\n      for (var _len = arguments.length, middleware = new Array(_len), _key = 0; _key < _len; _key++) {\n        middleware[_key] = arguments[_key];\n      }\n\n      var newMiddlewareList = middleware.map(function (fn) {\n        var newMiddleware = _objectSpread({\n          subscribe: noop,\n          unsubscribe: noop,\n          onStateChange: noop\n        }, fn({\n          instantSearchInstance: _this2\n        }));\n\n        _this2.middleware.push({\n          creator: fn,\n          instance: newMiddleware\n        });\n\n        return newMiddleware;\n      }); // If the instance has already started, we directly subscribe the\n      // middleware so they're notified of changes.\n\n      if (this.started) {\n        newMiddlewareList.forEach(function (m) {\n          m.subscribe();\n        });\n      }\n\n      return this;\n    }\n    /**\n     * Removes a middleware from the InstantSearch lifecycle.\n     */\n\n  }, {\n    key: \"unuse\",\n    value: function unuse() {\n      for (var _len2 = arguments.length, middlewareToUnuse = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        middlewareToUnuse[_key2] = arguments[_key2];\n      }\n\n      this.middleware.filter(function (m) {\n        return middlewareToUnuse.includes(m.creator);\n      }).forEach(function (m) {\n        return m.instance.unsubscribe();\n      });\n      this.middleware = this.middleware.filter(function (m) {\n        return !middlewareToUnuse.includes(m.creator);\n      });\n      return this;\n    } // @major we shipped with EXPERIMENTAL_use, but have changed that to just `use` now\n\n  }, {\n    key: \"EXPERIMENTAL_use\",\n    value: function EXPERIMENTAL_use() {\n      process.env.NODE_ENV === 'development' ? warning(false, 'The middleware API is now considered stable, so we recommend replacing `EXPERIMENTAL_use` with `use` before upgrading to the next major version.') : void 0;\n      return this.use.apply(this, arguments);\n    }\n    /**\n     * Adds a widget to the search instance.\n     * A widget can be added either before or after InstantSearch has started.\n     * @param widget The widget to add to InstantSearch.\n     *\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`.\n     */\n\n  }, {\n    key: \"addWidget\",\n    value: function addWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'addWidget will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`') : void 0;\n      return this.addWidgets([widget]);\n    }\n    /**\n     * Adds multiple widgets to the search instance.\n     * Widgets can be added either before or after InstantSearch has started.\n     * @param widgets The array of widgets to add to InstantSearch.\n     */\n\n  }, {\n    key: \"addWidgets\",\n    value: function addWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets. Please use `addWidget`.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n\n      this.mainIndex.addWidgets(widgets);\n      return this;\n    }\n    /**\n     * Removes a widget from the search instance.\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`\n     * @param widget The widget instance to remove from InstantSearch.\n     *\n     * The widget must implement a `dispose()` method to clear its state.\n     */\n\n  }, {\n    key: \"removeWidget\",\n    value: function removeWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'removeWidget will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`') : void 0;\n      return this.removeWidgets([widget]);\n    }\n    /**\n     * Removes multiple widgets from the search instance.\n     * @param widgets Array of widgets instances to remove from InstantSearch.\n     *\n     * The widgets must implement a `dispose()` method to clear their states.\n     */\n\n  }, {\n    key: \"removeWidgets\",\n    value: function removeWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets. Please use `removeWidget`.'));\n      }\n\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n\n      this.mainIndex.removeWidgets(widgets);\n      return this;\n    }\n    /**\n     * Ends the initialization of InstantSearch.js and triggers the\n     * first search. This method should be called after all widgets have been added\n     * to the instance of InstantSearch.js. InstantSearch.js also supports adding and removing\n     * widgets after the start as an **EXPERIMENTAL** feature.\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n\n      if (this.started) {\n        throw new Error(withUsage('The `start` method has already been called once.'));\n      } // This Helper is used for the queries, we don't care about its state. The\n      // states are managed at the `index` level. We use this Helper to create\n      // DerivedHelper scoped into the `index` widgets.\n      // In Vue InstantSearch' hydrate, a main helper gets set before start, so\n      // we need to respect this helper as a way to keep all listeners correct.\n\n\n      var mainHelper = this.mainHelper || algoliasearchHelper(this.client, this.indexName);\n\n      mainHelper.search = function () {\n        // This solution allows us to keep the exact same API for the users but\n        // under the hood, we have a different implementation. It should be\n        // completely transparent for the rest of the codebase. Only this module\n        // is impacted.\n        return mainHelper.searchOnlyWithDerivedHelpers();\n      };\n\n      if (this._searchFunction) {\n        // this client isn't used to actually search, but required for the helper\n        // to not throw errors\n        var fakeClient = {\n          search: function search() {\n            return new Promise(noop);\n          }\n        };\n        this._mainHelperSearch = mainHelper.search.bind(mainHelper);\n\n        mainHelper.search = function () {\n          var mainIndexHelper = _this3.mainIndex.getHelper();\n\n          var searchFunctionHelper = algoliasearchHelper(fakeClient, mainIndexHelper.state.index, mainIndexHelper.state);\n          searchFunctionHelper.once('search', function (_ref2) {\n            var state = _ref2.state;\n            mainIndexHelper.overrideStateWithoutTriggeringChangeEvent(state);\n\n            _this3._mainHelperSearch();\n          }); // Forward state changes from `searchFunctionHelper` to `mainIndexHelper`\n\n          searchFunctionHelper.on('change', function (_ref3) {\n            var state = _ref3.state;\n            mainIndexHelper.setState(state);\n          });\n\n          _this3._searchFunction(searchFunctionHelper);\n\n          return mainHelper;\n        };\n      } // Only the \"main\" Helper emits the `error` event vs the one for `search`\n      // and `results` that are also emitted on the derived one.\n\n\n      mainHelper.on('error', function (_ref4) {\n        var error = _ref4.error;\n\n        if (!(error instanceof Error)) {\n          // typescript lies here, error is in some cases { name: string, message: string }\n          var err = error;\n          error = Object.keys(err).reduce(function (acc, key) {\n            acc[key] = err[key];\n            return acc;\n          }, new Error(err.message));\n        } // If an error is emitted, it is re-thrown by events. In previous versions\n        // we emitted {error}, which is thrown as:\n        // \"Uncaught, unspecified \\\"error\\\" event. ([object Object])\"\n        // To avoid breaking changes, we make the error available in both\n        // `error` and `error.error`\n        // @MAJOR emit only error\n\n\n        error.error = error;\n\n        _this3.emit('error', error);\n      });\n      this.mainHelper = mainHelper;\n      this.middleware.forEach(function (_ref5) {\n        var instance = _ref5.instance;\n        instance.subscribe();\n      });\n      this.mainIndex.init({\n        instantSearchInstance: this,\n        parent: null,\n        uiState: this._initialUiState\n      });\n\n      if (this._initialResults) {\n        var originalScheduleSearch = this.scheduleSearch; // We don't schedule a first search when initial results are provided\n        // because we already have the results to render. This skips the initial\n        // network request on the browser on `start`.\n\n        this.scheduleSearch = defer(noop); // We also skip the initial network request when widgets are dynamically\n        // added in the first tick (that's the case in all the framework-based flavors).\n        // When we add a widget to `index`, it calls `scheduleSearch`. We can rely\n        // on our `defer` util to restore the original `scheduleSearch` value once\n        // widgets are added to hook back to the regular lifecycle.\n\n        defer(function () {\n          _this3.scheduleSearch = originalScheduleSearch;\n        })();\n      } // We only schedule a search when widgets have been added before `start()`\n      // because there are listeners that can use these results.\n      // This is especially useful in framework-based flavors that wait for\n      // dynamically-added widgets to trigger a network request. It avoids\n      // having to batch this initial network request with the one coming from\n      // `addWidgets()`.\n      // Later, we could also skip `index()` widgets and widgets that don't read\n      // the results, but this is an optimization that has a very low impact for now.\n      else if (this.mainIndex.getWidgets().length > 0) {\n          this.scheduleSearch();\n        } // Keep the previous reference for legacy purpose, some pattern use\n      // the direct Helper access `search.helper` (e.g multi-index).\n\n\n      this.helper = this.mainIndex.getHelper(); // track we started the search if we add more widgets,\n      // to init them directly after add\n\n      this.started = true;\n    }\n    /**\n     * Removes all widgets without triggering a search afterwards. This is an **EXPERIMENTAL** feature,\n     * if you find an issue with it, please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20dispose).\n     * @return {undefined} This method does not return anything\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.scheduleSearch.cancel();\n      this.scheduleRender.cancel();\n      clearTimeout(this._searchStalledTimer);\n      this.removeWidgets(this.mainIndex.getWidgets());\n      this.mainIndex.dispose(); // You can not start an instance two times, therefore a disposed instance\n      // needs to set started as false otherwise this can not be restarted at a\n      // later point.\n\n      this.started = false; // The helper needs to be reset to perform the next search from a fresh state.\n      // If not reset, it would use the state stored before calling `dispose()`.\n\n      this.removeAllListeners();\n      this.mainHelper.removeAllListeners();\n      this.mainHelper = null;\n      this.helper = null;\n      this.middleware.forEach(function (_ref6) {\n        var instance = _ref6.instance;\n        instance.unsubscribe();\n      });\n    }\n  }, {\n    key: \"scheduleStalledRender\",\n    value: function scheduleStalledRender() {\n      var _this4 = this;\n\n      if (!this._searchStalledTimer) {\n        this._searchStalledTimer = setTimeout(function () {\n          _this4._isSearchStalled = true;\n\n          _this4.scheduleRender();\n        }, this._stalledSearchDelay);\n      }\n    }\n  }, {\n    key: \"setUiState\",\n    value: function setUiState(uiState) {\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `setUiState`.'));\n      } // We refresh the index UI state to update the local UI state that the\n      // main index passes to the function form of `setUiState`.\n\n\n      this.mainIndex.refreshUiState();\n      var nextUiState = typeof uiState === 'function' ? uiState(this.mainIndex.getWidgetUiState({})) : uiState;\n\n      var setIndexHelperState = function setIndexHelperState(indexWidget) {\n        var nextIndexUiState = nextUiState[indexWidget.getIndexId()] || {};\n\n        if (process.env.NODE_ENV === 'development') {\n          checkIndexUiState({\n            index: indexWidget,\n            indexUiState: nextIndexUiState\n          });\n        }\n\n        indexWidget.getHelper().setState(indexWidget.getWidgetSearchParameters(indexWidget.getHelper().state, {\n          uiState: nextIndexUiState\n        }));\n        indexWidget.getWidgets().filter(isIndexWidget).forEach(setIndexHelperState);\n      };\n\n      setIndexHelperState(this.mainIndex);\n      this.scheduleSearch();\n      this.onInternalStateChange();\n    }\n  }, {\n    key: \"getUiState\",\n    value: function getUiState() {\n      if (this.started) {\n        // We refresh the index UI state to make sure changes from `refine` are taken in account\n        this.mainIndex.refreshUiState();\n      }\n\n      return this.mainIndex.getWidgetUiState({});\n    }\n  }, {\n    key: \"createURL\",\n    value: function createURL() {\n      var nextState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.started) {\n        throw new Error(withUsage('The `start` method needs to be called before `createURL`.'));\n      }\n\n      return this._createURL(nextState);\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `refresh`.'));\n      }\n\n      this.mainHelper.clearCache().search();\n    }\n  }]);\n\n  return InstantSearch;\n}(EventEmitter);\n\nexport default InstantSearch;"],"mappings":"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"},"metadata":{},"sourceType":"module"}