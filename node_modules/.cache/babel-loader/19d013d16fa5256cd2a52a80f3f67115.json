{"ast":null,"code":"function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport { escapeFacets, TAG_PLACEHOLDER, TAG_REPLACEMENT, checkRendering, createDocumentationMessageGenerator, createSendEventForFacet, noop } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'refinement-list',\n  connector: true\n});\nvar DEFAULT_SORT = ['isRefined', 'count:desc', 'name:asc'];\n/**\n * **RefinementList** connector provides the logic to build a custom widget that\n * will let the user filter the results based on the values of a specific facet.\n *\n * **Requirement:** the attribute passed as `attribute` must be present in\n * attributesForFaceting of the searched index.\n *\n * This connector provides:\n * - a `refine()` function to select an item.\n * - a `toggleShowMore()` function to display more or less items\n * - a `searchForItems()` function to search within the items.\n */\n\nvar connectRefinementList = function connectRefinementList(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n        attribute = _ref.attribute,\n        _ref$operator = _ref.operator,\n        operator = _ref$operator === void 0 ? 'or' : _ref$operator,\n        _ref$limit = _ref.limit,\n        limit = _ref$limit === void 0 ? 10 : _ref$limit,\n        _ref$showMore = _ref.showMore,\n        showMore = _ref$showMore === void 0 ? false : _ref$showMore,\n        _ref$showMoreLimit = _ref.showMoreLimit,\n        showMoreLimit = _ref$showMoreLimit === void 0 ? 20 : _ref$showMoreLimit,\n        _ref$sortBy = _ref.sortBy,\n        sortBy = _ref$sortBy === void 0 ? DEFAULT_SORT : _ref$sortBy,\n        _ref$escapeFacetValue = _ref.escapeFacetValues,\n        escapeFacetValues = _ref$escapeFacetValue === void 0 ? true : _ref$escapeFacetValue,\n        _ref$transformItems = _ref.transformItems,\n        transformItems = _ref$transformItems === void 0 ? function (items) {\n      return items;\n    } : _ref$transformItems;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    if (!/^(and|or)$/.test(operator)) {\n      throw new Error(withUsage(\"The `operator` must one of: `\\\"and\\\"`, `\\\"or\\\"` (got \\\"\".concat(operator, \"\\\").\")));\n    }\n\n    if (showMore === true && showMoreLimit <= limit) {\n      throw new Error(withUsage('`showMoreLimit` should be greater than `limit`.'));\n    }\n\n    var formatItems = function formatItems(_ref2) {\n      var label = _ref2.name,\n          value = _ref2.escapedValue,\n          item = _objectWithoutProperties(_ref2, [\"name\", \"escapedValue\"]);\n\n      return _objectSpread(_objectSpread({}, item), {}, {\n        value: value,\n        label: label,\n        highlighted: label\n      });\n    };\n\n    var lastResultsFromMainSearch;\n    var lastItemsFromMainSearch = [];\n    var hasExhaustiveItems = true;\n    var triggerRefine;\n    var sendEvent;\n    var isShowingMore = false; // Provide the same function to the `renderFn` so that way the user\n    // has to only bind it once when `isFirstRendering` for instance\n\n    var toggleShowMore = function toggleShowMore() {};\n\n    function cachedToggleShowMore() {\n      toggleShowMore();\n    }\n\n    function createToggleShowMore(renderOptions, widget) {\n      return function () {\n        isShowingMore = !isShowingMore;\n        widget.render(renderOptions);\n      };\n    }\n\n    function getLimit() {\n      return isShowingMore ? showMoreLimit : limit;\n    }\n\n    var searchForFacetValues = function searchForFacetValues() {\n      return function () {};\n    };\n\n    var createSearchForFacetValues = function createSearchForFacetValues(helper, widget) {\n      return function (renderOptions) {\n        return function (query) {\n          var instantSearchInstance = renderOptions.instantSearchInstance,\n              searchResults = renderOptions.results;\n\n          if (query === '' && lastItemsFromMainSearch) {\n            // render with previous data from the helper.\n            renderFn(_objectSpread(_objectSpread({}, widget.getWidgetRenderState(_objectSpread(_objectSpread({}, renderOptions), {}, {\n              results: lastResultsFromMainSearch\n            }))), {}, {\n              instantSearchInstance: instantSearchInstance\n            }), false);\n          } else {\n            var tags = {\n              highlightPreTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPreTag : TAG_REPLACEMENT.highlightPreTag,\n              highlightPostTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPostTag : TAG_REPLACEMENT.highlightPostTag\n            };\n            helper.searchForFacetValues(attribute, query, // We cap the `maxFacetHits` value to 100 because the Algolia API\n            // doesn't support a greater number.\n            // See https://www.algolia.com/doc/api-reference/api-parameters/maxFacetHits/\n            Math.min(getLimit(), 100), tags).then(function (results) {\n              var facetValues = escapeFacetValues ? escapeFacets(results.facetHits) : results.facetHits;\n              var normalizedFacetValues = transformItems(facetValues.map(function (_ref3) {\n                var escapedValue = _ref3.escapedValue,\n                    value = _ref3.value,\n                    item = _objectWithoutProperties(_ref3, [\"escapedValue\", \"value\"]);\n\n                return _objectSpread(_objectSpread({}, item), {}, {\n                  value: escapedValue,\n                  label: value\n                });\n              }), {\n                results: searchResults\n              });\n              renderFn(_objectSpread(_objectSpread({}, widget.getWidgetRenderState(_objectSpread(_objectSpread({}, renderOptions), {}, {\n                results: lastResultsFromMainSearch\n              }))), {}, {\n                items: normalizedFacetValues,\n                canToggleShowMore: false,\n                canRefine: true,\n                isFromSearch: true,\n                instantSearchInstance: instantSearchInstance\n              }), false);\n            });\n          }\n        };\n      };\n    };\n\n    return {\n      $$type: 'ais.refinementList',\n      init: function init(initOptions) {\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: initOptions.instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {\n          instantSearchInstance: renderOptions.instantSearchInstance\n        }), false);\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          refinementList: _objectSpread(_objectSpread({}, renderState.refinementList), {}, _defineProperty({}, attribute, this.getWidgetRenderState(renderOptions)))\n        });\n      },\n      getWidgetRenderState: function getWidgetRenderState(renderOptions) {\n        var results = renderOptions.results,\n            state = renderOptions.state,\n            _createURL = renderOptions.createURL,\n            instantSearchInstance = renderOptions.instantSearchInstance,\n            helper = renderOptions.helper;\n        var items = [];\n        var facetValues = [];\n\n        if (!sendEvent || !triggerRefine || !searchForFacetValues) {\n          sendEvent = createSendEventForFacet({\n            instantSearchInstance: instantSearchInstance,\n            helper: helper,\n            attribute: attribute,\n            widgetType: this.$$type\n          });\n\n          triggerRefine = function triggerRefine(facetValue) {\n            sendEvent('click', facetValue);\n            helper.toggleFacetRefinement(attribute, facetValue).search();\n          };\n\n          searchForFacetValues = createSearchForFacetValues(helper, this);\n        }\n\n        if (results) {\n          var values = results.getFacetValues(attribute, {\n            sortBy: sortBy,\n            facetOrdering: sortBy === DEFAULT_SORT\n          });\n          facetValues = values && Array.isArray(values) ? values : [];\n          items = transformItems(facetValues.slice(0, getLimit()).map(formatItems), {\n            results: results\n          });\n          var maxValuesPerFacetConfig = state.maxValuesPerFacet;\n          var currentLimit = getLimit(); // If the limit is the max number of facet retrieved it is impossible to know\n          // if the facets are exhaustive. The only moment we are sure it is exhaustive\n          // is when it is strictly under the number requested unless we know that another\n          // widget has requested more values (maxValuesPerFacet > getLimit()).\n          // Because this is used for making the search of facets unable or not, it is important\n          // to be conservative here.\n\n          hasExhaustiveItems = maxValuesPerFacetConfig > currentLimit ? facetValues.length <= currentLimit : facetValues.length < currentLimit;\n          lastResultsFromMainSearch = results;\n          lastItemsFromMainSearch = items;\n\n          if (renderOptions.results) {\n            toggleShowMore = createToggleShowMore(renderOptions, this);\n          }\n        } // Do not mistake searchForFacetValues and searchFacetValues which is the actual search\n        // function\n\n\n        var searchFacetValues = searchForFacetValues && searchForFacetValues(renderOptions);\n        var canShowLess = isShowingMore && lastItemsFromMainSearch.length > limit;\n        var canShowMore = showMore && !hasExhaustiveItems;\n        var canToggleShowMore = canShowLess || canShowMore;\n        return {\n          createURL: function createURL(facetValue) {\n            return _createURL(state.resetPage().toggleFacetRefinement(attribute, facetValue));\n          },\n          items: items,\n          refine: triggerRefine,\n          searchForItems: searchFacetValues,\n          isFromSearch: false,\n          canRefine: items.length > 0,\n          widgetParams: widgetParams,\n          isShowingMore: isShowingMore,\n          canToggleShowMore: canToggleShowMore,\n          toggleShowMore: cachedToggleShowMore,\n          sendEvent: sendEvent,\n          hasExhaustiveItems: hasExhaustiveItems\n        };\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n        unmountFn();\n        var withoutMaxValuesPerFacet = state.setQueryParameter('maxValuesPerFacet', undefined);\n\n        if (operator === 'and') {\n          return withoutMaxValuesPerFacet.removeFacet(attribute);\n        }\n\n        return withoutMaxValuesPerFacet.removeDisjunctiveFacet(attribute);\n      },\n      getWidgetUiState: function getWidgetUiState(uiState, _ref5) {\n        var searchParameters = _ref5.searchParameters;\n        var values = operator === 'or' ? searchParameters.getDisjunctiveRefinements(attribute) : searchParameters.getConjunctiveRefinements(attribute);\n\n        if (!values.length) {\n          return uiState;\n        }\n\n        return _objectSpread(_objectSpread({}, uiState), {}, {\n          refinementList: _objectSpread(_objectSpread({}, uiState.refinementList), {}, _defineProperty({}, attribute, values))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n        var uiState = _ref6.uiState;\n        var isDisjunctive = operator === 'or';\n        var values = uiState.refinementList && uiState.refinementList[attribute];\n        var withoutRefinements = searchParameters.clearRefinements(attribute);\n        var withFacetConfiguration = isDisjunctive ? withoutRefinements.addDisjunctiveFacet(attribute) : withoutRefinements.addFacet(attribute);\n        var currentMaxValuesPerFacet = withFacetConfiguration.maxValuesPerFacet || 0;\n        var nextMaxValuesPerFacet = Math.max(currentMaxValuesPerFacet, showMore ? showMoreLimit : limit);\n        var withMaxValuesPerFacet = withFacetConfiguration.setQueryParameter('maxValuesPerFacet', nextMaxValuesPerFacet);\n\n        if (!values) {\n          var key = isDisjunctive ? 'disjunctiveFacetsRefinements' : 'facetsRefinements';\n          return withMaxValuesPerFacet.setQueryParameters(_defineProperty({}, key, _objectSpread(_objectSpread({}, withMaxValuesPerFacet[key]), {}, _defineProperty({}, attribute, []))));\n        }\n\n        return values.reduce(function (parameters, value) {\n          return isDisjunctive ? parameters.addDisjunctiveFacetRefinement(attribute, value) : parameters.addFacetRefinement(attribute, value);\n        }, withMaxValuesPerFacet);\n      }\n    };\n  };\n};\n\nexport default connectRefinementList;","map":{"version":3,"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","escapeFacets","TAG_PLACEHOLDER","TAG_REPLACEMENT","checkRendering","createDocumentationMessageGenerator","createSendEventForFacet","noop","withUsage","name","connector","DEFAULT_SORT","connectRefinementList","renderFn","unmountFn","undefined","widgetParams","_ref","attribute","_ref$operator","operator","_ref$limit","limit","_ref$showMore","showMore","_ref$showMoreLimit","showMoreLimit","_ref$sortBy","sortBy","_ref$escapeFacetValue","escapeFacetValues","_ref$transformItems","transformItems","items","Error","test","concat","formatItems","_ref2","label","escapedValue","item","highlighted","lastResultsFromMainSearch","lastItemsFromMainSearch","hasExhaustiveItems","triggerRefine","sendEvent","isShowingMore","toggleShowMore","cachedToggleShowMore","createToggleShowMore","renderOptions","widget","render","getLimit","searchForFacetValues","createSearchForFacetValues","helper","query","instantSearchInstance","searchResults","results","getWidgetRenderState","tags","highlightPreTag","highlightPostTag","Math","min","then","facetValues","facetHits","normalizedFacetValues","map","_ref3","canToggleShowMore","canRefine","isFromSearch","$$type","init","initOptions","getRenderState","renderState","refinementList","state","_createURL","createURL","widgetType","facetValue","toggleFacetRefinement","search","values","getFacetValues","facetOrdering","Array","isArray","slice","maxValuesPerFacetConfig","maxValuesPerFacet","currentLimit","searchFacetValues","canShowLess","canShowMore","resetPage","refine","searchForItems","dispose","_ref4","withoutMaxValuesPerFacet","setQueryParameter","removeFacet","removeDisjunctiveFacet","getWidgetUiState","uiState","_ref5","searchParameters","getDisjunctiveRefinements","getConjunctiveRefinements","getWidgetSearchParameters","_ref6","isDisjunctive","withoutRefinements","clearRefinements","withFacetConfiguration","addDisjunctiveFacet","addFacet","currentMaxValuesPerFacet","nextMaxValuesPerFacet","max","withMaxValuesPerFacet","setQueryParameters","reduce","parameters","addDisjunctiveFacetRefinement","addFacetRefinement"],"sources":["/Users/christoalex/Algolia/my-app/node_modules/instantsearch.js/es/connectors/refinement-list/connectRefinementList.js"],"sourcesContent":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { escapeFacets, TAG_PLACEHOLDER, TAG_REPLACEMENT, checkRendering, createDocumentationMessageGenerator, createSendEventForFacet, noop } from \"../../lib/utils/index.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'refinement-list',\n  connector: true\n});\nvar DEFAULT_SORT = ['isRefined', 'count:desc', 'name:asc'];\n\n/**\n * **RefinementList** connector provides the logic to build a custom widget that\n * will let the user filter the results based on the values of a specific facet.\n *\n * **Requirement:** the attribute passed as `attribute` must be present in\n * attributesForFaceting of the searched index.\n *\n * This connector provides:\n * - a `refine()` function to select an item.\n * - a `toggleShowMore()` function to display more or less items\n * - a `searchForItems()` function to search within the items.\n */\nvar connectRefinementList = function connectRefinementList(renderFn) {\n  var unmountFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  checkRendering(renderFn, withUsage());\n  return function (widgetParams) {\n    var _ref = widgetParams || {},\n        attribute = _ref.attribute,\n        _ref$operator = _ref.operator,\n        operator = _ref$operator === void 0 ? 'or' : _ref$operator,\n        _ref$limit = _ref.limit,\n        limit = _ref$limit === void 0 ? 10 : _ref$limit,\n        _ref$showMore = _ref.showMore,\n        showMore = _ref$showMore === void 0 ? false : _ref$showMore,\n        _ref$showMoreLimit = _ref.showMoreLimit,\n        showMoreLimit = _ref$showMoreLimit === void 0 ? 20 : _ref$showMoreLimit,\n        _ref$sortBy = _ref.sortBy,\n        sortBy = _ref$sortBy === void 0 ? DEFAULT_SORT : _ref$sortBy,\n        _ref$escapeFacetValue = _ref.escapeFacetValues,\n        escapeFacetValues = _ref$escapeFacetValue === void 0 ? true : _ref$escapeFacetValue,\n        _ref$transformItems = _ref.transformItems,\n        transformItems = _ref$transformItems === void 0 ? function (items) {\n      return items;\n    } : _ref$transformItems;\n\n    if (!attribute) {\n      throw new Error(withUsage('The `attribute` option is required.'));\n    }\n\n    if (!/^(and|or)$/.test(operator)) {\n      throw new Error(withUsage(\"The `operator` must one of: `\\\"and\\\"`, `\\\"or\\\"` (got \\\"\".concat(operator, \"\\\").\")));\n    }\n\n    if (showMore === true && showMoreLimit <= limit) {\n      throw new Error(withUsage('`showMoreLimit` should be greater than `limit`.'));\n    }\n\n    var formatItems = function formatItems(_ref2) {\n      var label = _ref2.name,\n          value = _ref2.escapedValue,\n          item = _objectWithoutProperties(_ref2, [\"name\", \"escapedValue\"]);\n\n      return _objectSpread(_objectSpread({}, item), {}, {\n        value: value,\n        label: label,\n        highlighted: label\n      });\n    };\n\n    var lastResultsFromMainSearch;\n    var lastItemsFromMainSearch = [];\n    var hasExhaustiveItems = true;\n    var triggerRefine;\n    var sendEvent;\n    var isShowingMore = false; // Provide the same function to the `renderFn` so that way the user\n    // has to only bind it once when `isFirstRendering` for instance\n\n    var toggleShowMore = function toggleShowMore() {};\n\n    function cachedToggleShowMore() {\n      toggleShowMore();\n    }\n\n    function createToggleShowMore(renderOptions, widget) {\n      return function () {\n        isShowingMore = !isShowingMore;\n        widget.render(renderOptions);\n      };\n    }\n\n    function getLimit() {\n      return isShowingMore ? showMoreLimit : limit;\n    }\n\n    var searchForFacetValues = function searchForFacetValues() {\n      return function () {};\n    };\n\n    var createSearchForFacetValues = function createSearchForFacetValues(helper, widget) {\n      return function (renderOptions) {\n        return function (query) {\n          var instantSearchInstance = renderOptions.instantSearchInstance,\n              searchResults = renderOptions.results;\n\n          if (query === '' && lastItemsFromMainSearch) {\n            // render with previous data from the helper.\n            renderFn(_objectSpread(_objectSpread({}, widget.getWidgetRenderState(_objectSpread(_objectSpread({}, renderOptions), {}, {\n              results: lastResultsFromMainSearch\n            }))), {}, {\n              instantSearchInstance: instantSearchInstance\n            }), false);\n          } else {\n            var tags = {\n              highlightPreTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPreTag : TAG_REPLACEMENT.highlightPreTag,\n              highlightPostTag: escapeFacetValues ? TAG_PLACEHOLDER.highlightPostTag : TAG_REPLACEMENT.highlightPostTag\n            };\n            helper.searchForFacetValues(attribute, query, // We cap the `maxFacetHits` value to 100 because the Algolia API\n            // doesn't support a greater number.\n            // See https://www.algolia.com/doc/api-reference/api-parameters/maxFacetHits/\n            Math.min(getLimit(), 100), tags).then(function (results) {\n              var facetValues = escapeFacetValues ? escapeFacets(results.facetHits) : results.facetHits;\n              var normalizedFacetValues = transformItems(facetValues.map(function (_ref3) {\n                var escapedValue = _ref3.escapedValue,\n                    value = _ref3.value,\n                    item = _objectWithoutProperties(_ref3, [\"escapedValue\", \"value\"]);\n\n                return _objectSpread(_objectSpread({}, item), {}, {\n                  value: escapedValue,\n                  label: value\n                });\n              }), {\n                results: searchResults\n              });\n              renderFn(_objectSpread(_objectSpread({}, widget.getWidgetRenderState(_objectSpread(_objectSpread({}, renderOptions), {}, {\n                results: lastResultsFromMainSearch\n              }))), {}, {\n                items: normalizedFacetValues,\n                canToggleShowMore: false,\n                canRefine: true,\n                isFromSearch: true,\n                instantSearchInstance: instantSearchInstance\n              }), false);\n            });\n          }\n        };\n      };\n    };\n\n    return {\n      $$type: 'ais.refinementList',\n      init: function init(initOptions) {\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(initOptions)), {}, {\n          instantSearchInstance: initOptions.instantSearchInstance\n        }), true);\n      },\n      render: function render(renderOptions) {\n        renderFn(_objectSpread(_objectSpread({}, this.getWidgetRenderState(renderOptions)), {}, {\n          instantSearchInstance: renderOptions.instantSearchInstance\n        }), false);\n      },\n      getRenderState: function getRenderState(renderState, renderOptions) {\n        return _objectSpread(_objectSpread({}, renderState), {}, {\n          refinementList: _objectSpread(_objectSpread({}, renderState.refinementList), {}, _defineProperty({}, attribute, this.getWidgetRenderState(renderOptions)))\n        });\n      },\n      getWidgetRenderState: function getWidgetRenderState(renderOptions) {\n        var results = renderOptions.results,\n            state = renderOptions.state,\n            _createURL = renderOptions.createURL,\n            instantSearchInstance = renderOptions.instantSearchInstance,\n            helper = renderOptions.helper;\n        var items = [];\n        var facetValues = [];\n\n        if (!sendEvent || !triggerRefine || !searchForFacetValues) {\n          sendEvent = createSendEventForFacet({\n            instantSearchInstance: instantSearchInstance,\n            helper: helper,\n            attribute: attribute,\n            widgetType: this.$$type\n          });\n\n          triggerRefine = function triggerRefine(facetValue) {\n            sendEvent('click', facetValue);\n            helper.toggleFacetRefinement(attribute, facetValue).search();\n          };\n\n          searchForFacetValues = createSearchForFacetValues(helper, this);\n        }\n\n        if (results) {\n          var values = results.getFacetValues(attribute, {\n            sortBy: sortBy,\n            facetOrdering: sortBy === DEFAULT_SORT\n          });\n          facetValues = values && Array.isArray(values) ? values : [];\n          items = transformItems(facetValues.slice(0, getLimit()).map(formatItems), {\n            results: results\n          });\n          var maxValuesPerFacetConfig = state.maxValuesPerFacet;\n          var currentLimit = getLimit(); // If the limit is the max number of facet retrieved it is impossible to know\n          // if the facets are exhaustive. The only moment we are sure it is exhaustive\n          // is when it is strictly under the number requested unless we know that another\n          // widget has requested more values (maxValuesPerFacet > getLimit()).\n          // Because this is used for making the search of facets unable or not, it is important\n          // to be conservative here.\n\n          hasExhaustiveItems = maxValuesPerFacetConfig > currentLimit ? facetValues.length <= currentLimit : facetValues.length < currentLimit;\n          lastResultsFromMainSearch = results;\n          lastItemsFromMainSearch = items;\n\n          if (renderOptions.results) {\n            toggleShowMore = createToggleShowMore(renderOptions, this);\n          }\n        } // Do not mistake searchForFacetValues and searchFacetValues which is the actual search\n        // function\n\n\n        var searchFacetValues = searchForFacetValues && searchForFacetValues(renderOptions);\n        var canShowLess = isShowingMore && lastItemsFromMainSearch.length > limit;\n        var canShowMore = showMore && !hasExhaustiveItems;\n        var canToggleShowMore = canShowLess || canShowMore;\n        return {\n          createURL: function createURL(facetValue) {\n            return _createURL(state.resetPage().toggleFacetRefinement(attribute, facetValue));\n          },\n          items: items,\n          refine: triggerRefine,\n          searchForItems: searchFacetValues,\n          isFromSearch: false,\n          canRefine: items.length > 0,\n          widgetParams: widgetParams,\n          isShowingMore: isShowingMore,\n          canToggleShowMore: canToggleShowMore,\n          toggleShowMore: cachedToggleShowMore,\n          sendEvent: sendEvent,\n          hasExhaustiveItems: hasExhaustiveItems\n        };\n      },\n      dispose: function dispose(_ref4) {\n        var state = _ref4.state;\n        unmountFn();\n        var withoutMaxValuesPerFacet = state.setQueryParameter('maxValuesPerFacet', undefined);\n\n        if (operator === 'and') {\n          return withoutMaxValuesPerFacet.removeFacet(attribute);\n        }\n\n        return withoutMaxValuesPerFacet.removeDisjunctiveFacet(attribute);\n      },\n      getWidgetUiState: function getWidgetUiState(uiState, _ref5) {\n        var searchParameters = _ref5.searchParameters;\n        var values = operator === 'or' ? searchParameters.getDisjunctiveRefinements(attribute) : searchParameters.getConjunctiveRefinements(attribute);\n\n        if (!values.length) {\n          return uiState;\n        }\n\n        return _objectSpread(_objectSpread({}, uiState), {}, {\n          refinementList: _objectSpread(_objectSpread({}, uiState.refinementList), {}, _defineProperty({}, attribute, values))\n        });\n      },\n      getWidgetSearchParameters: function getWidgetSearchParameters(searchParameters, _ref6) {\n        var uiState = _ref6.uiState;\n        var isDisjunctive = operator === 'or';\n        var values = uiState.refinementList && uiState.refinementList[attribute];\n        var withoutRefinements = searchParameters.clearRefinements(attribute);\n        var withFacetConfiguration = isDisjunctive ? withoutRefinements.addDisjunctiveFacet(attribute) : withoutRefinements.addFacet(attribute);\n        var currentMaxValuesPerFacet = withFacetConfiguration.maxValuesPerFacet || 0;\n        var nextMaxValuesPerFacet = Math.max(currentMaxValuesPerFacet, showMore ? showMoreLimit : limit);\n        var withMaxValuesPerFacet = withFacetConfiguration.setQueryParameter('maxValuesPerFacet', nextMaxValuesPerFacet);\n\n        if (!values) {\n          var key = isDisjunctive ? 'disjunctiveFacetsRefinements' : 'facetsRefinements';\n          return withMaxValuesPerFacet.setQueryParameters(_defineProperty({}, key, _objectSpread(_objectSpread({}, withMaxValuesPerFacet[key]), {}, _defineProperty({}, attribute, []))));\n        }\n\n        return values.reduce(function (parameters, value) {\n          return isDisjunctive ? parameters.addDisjunctiveFacetRefinement(attribute, value) : parameters.addFacetRefinement(attribute, value);\n        }, withMaxValuesPerFacet);\n      }\n    };\n  };\n};\n\nexport default connectRefinementList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}